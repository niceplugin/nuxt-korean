---
title: ì—…ê·¸ë ˆì´ë“œ ê°€ì´ë“œ
description: 'ìµœì‹  Nuxt ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì„¸ìš”.'
navigation.icon: i-lucide-circle-arrow-up
---

## [Nuxt ì—…ê·¸ë ˆì´ë“œ](#upgrading-nuxt)

### [ìµœì‹  ë¦´ë¦¬ìŠ¤](#latest-release)

Nuxtë¥¼ [ìµœì‹  ë¦´ë¦¬ìŠ¤](https://github.com/nuxt/nuxt/releases)ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ `nuxt upgrade` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

::code-group{sync="pm"}

```bash [npm]
npx nuxt upgrade
```

```bash [yarn]
yarn nuxt upgrade
```

```bash [pnpm]
pnpm nuxt upgrade
```

```bash [bun]
bun x nuxt upgrade
```

::

### [Nightly ë¦´ë¦¬ìŠ¤ ì±„ë„](#nightly-release-channel)

ìµœì‹  Nuxt ë¹Œë“œë¥¼ ì‚¬ìš©í•˜ê³  ë¦´ë¦¬ìŠ¤ ì „ì— ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ [nightly ë¦´ë¦¬ìŠ¤ ì±„ë„](/docs/guide/going-further/nightly-release-channel) ê°€ì´ë“œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

::warning
nightly ë¦´ë¦¬ìŠ¤ ì±„ë„ì˜ `latest` íƒœê·¸ëŠ” í˜„ì¬ Nuxt v4 ë¸Œëœì¹˜ë¥¼ ì¶”ì í•˜ê³  ìˆìœ¼ë¯€ë¡œ, ì§€ê¸ˆì€ íŠ¹íˆ íŒŒê´´ì ì¸ ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤ &mdash; ì£¼ì˜í•˜ì„¸ìš”! 3.x ë¸Œëœì¹˜ nightly ë¦´ë¦¬ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ `"nuxt": "npm:nuxt-nightly@3x"`ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
::

## [Nuxt 4 í…ŒìŠ¤íŠ¸í•˜ê¸°](#testing-nuxt-4)

Nuxt 4ëŠ” **2025ë…„ 2ë¶„ê¸° ì¶œì‹œ ì˜ˆì •**ì…ë‹ˆë‹¤. í˜„ì¬ `compatibilityVersion: 4`ë¥¼ í†µí•´ ì œê³µë˜ëŠ” ëª¨ë“  ê¸°ëŠ¥ì´ í¬í•¨ë  ì˜ˆì •ì…ë‹ˆë‹¤.

ì¶œì‹œ ì „ê¹Œì§€ëŠ” Nuxt 3.12+ ë²„ì „ì—ì„œ Nuxt 4ì˜ ì£¼ìš” ë³€ê²½ ì‚¬í•­ì„ ë¯¸ë¦¬ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

:video-accordion{title="Alexander Lichterê°€ Nuxt 4ì˜ íŒŒê´´ì  ë³€ê²½ ì‚¬í•­ì„ ë¯¸ë¦¬ ì ìš©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ëŠ” ì˜ìƒ ë³´ê¸°" videoId="r4wFKlcJK6c"}

### [Nuxt 4 ì ìš©í•˜ê¸°](#opting-in-to-nuxt-4)

ë¨¼ì €, Nuxtë¥¼ [ìµœì‹  ë¦´ë¦¬ìŠ¤](https://github.com/nuxt/nuxt/releases)ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ì„¸ìš”.

ê·¸ëŸ° ë‹¤ìŒ `compatibilityVersion`ì„ Nuxt 4 ë™ì‘ì— ë§ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

::code-collapse
```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  future: {
    compatibilityVersion: 4,
  },
  // _ëª¨ë“ _ Nuxt v3 ë™ì‘ì„ ë‹¤ì‹œ í™œì„±í™”í•˜ë ¤ë©´ ë‹¤ìŒ ì˜µì…˜ì„ ì„¤ì •í•˜ì„¸ìš”:
  // srcDir: '.',
  // dir: {
  //   app: 'app'
  // },
  // experimental: {
  //   scanPageMeta: 'after-resolve',
  //   sharedPrerenderData: false,
  //   compileTemplate: true,
  //   resetAsyncDataToUndefined: true,
  //   templateUtils: true,
  //   relativeWatchPaths: true,
  //   normalizeComponentNames: false,
  //   spaLoadingTemplateLocation: 'within',
  //   parseErrorData: false,
  //   pendingWhenIdle: true,
  //   alwaysRunFetchOnKeyChange: true,
  //   defaults: {
  //     useAsyncData: {
  //       deep: true
  //     }
  //   }
  // },
  // features: {
  //   inlineStyles: true
  // },
  // unhead: {
  //   renderSSRHeadOptions: {
  //     omitLineBreaks: false
  //   }
  // }
})
```
::

::note
í˜„ì¬ë¡œì„œëŠ” Nuxt 4 ë™ì‘ì„ ì ìš©í•˜ëŠ” ê° ë ˆì´ì–´ë§ˆë‹¤ compatibility versionì„ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤. Nuxt 4ê°€ ì¶œì‹œëœ ì´í›„ì—ëŠ” í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
::

`compatibilityVersion`ì„ `4`ë¡œ ì„¤ì •í•˜ë©´ Nuxt ì„¤ì • ì „ë°˜ì˜ ê¸°ë³¸ê°’ì´ Nuxt v4 ë™ì‘ì— ë§ê²Œ ë³€ê²½ë˜ì§€ë§Œ, í…ŒìŠ¤íŠ¸ ì‹œ ìœ„ì— ì£¼ì„ ì²˜ë¦¬ëœ ë¼ì¸ì²˜ëŸ¼ Nuxt v3 ë™ì‘ì„ ì„¸ë°€í•˜ê²Œ ë‹¤ì‹œ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¸ì œê°€ ìˆë‹¤ë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”. Nuxt ë˜ëŠ” ìƒíƒœê³„ì—ì„œ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

íŒŒê´´ì ì´ê±°ë‚˜ ì¤‘ìš”í•œ ë³€ê²½ ì‚¬í•­ì€ ì´ê³³ì— ì´ì£¼ ë‹¨ê³„ì™€ í•¨ê»˜ ì•ˆë‚´ë  ì˜ˆì •ì…ë‹ˆë‹¤.

::note
ì´ ì„¹ì…˜ì€ ìµœì¢… ë¦´ë¦¬ìŠ¤ ì „ê¹Œì§€ ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë‹ˆ, `compatibilityVersion: 4`ë¡œ Nuxt 4ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²½ìš° ì •ê¸°ì ìœ¼ë¡œ ì´ê³³ì„ í™•ì¸í•˜ì„¸ìš”.
::

### [Codemodsë¥¼ ì´ìš©í•œ ë§ˆì´ê·¸ë ˆì´ì…˜](#migrating-using-codemods)

ì—…ê·¸ë ˆì´ë“œ ê³¼ì •ì„ ì‰½ê²Œ í•˜ê¸° ìœ„í•´ [Codemod](https://github.com/codemod-com/codemod) íŒ€ê³¼ í˜‘ë ¥í•˜ì—¬ ì—¬ëŸ¬ ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„ë¥¼ ì˜¤í”ˆì†ŒìŠ¤ codemodë¡œ ìë™í™”í–ˆìŠµë‹ˆë‹¤.

::note
ë¬¸ì œê°€ ë°œìƒí•˜ë©´ `npx codemod feedback`ìœ¼ë¡œ Codemod íŒ€ì— ë³´ê³ í•´ ì£¼ì„¸ìš” ğŸ™
::

Nuxt 4 codemod ì „ì²´ ëª©ë¡, ê° codemodì˜ ìƒì„¸ ì •ë³´, ì†ŒìŠ¤, ì‹¤í–‰ ë°©ë²• ë“±ì€ [Codemod Registry](https://go.codemod.com/codemod-registry)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ê°€ì´ë“œì—ì„œ ì–¸ê¸‰ëœ ëª¨ë“  codemodëŠ” ë‹¤ìŒ `codemod` ë ˆì‹œí”¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

::code-group

```bash [npm]
npx codemod@latest nuxt/4/migration-recipe
```

```bash [yarn]
yarn dlx codemod@latest nuxt/4/migration-recipe
```

```bash [pnpm]
pnpm dlx codemod@latest nuxt/4/migration-recipe
```

```bash [bun]
bun x codemod@latest nuxt/4/migration-recipe
```

::

ì´ ëª…ë ¹ì–´ëŠ” ëª¨ë“  codemodë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë©°, ì‹¤í–‰ì„ ì›í•˜ì§€ ì•ŠëŠ” codemodëŠ” ì„ íƒ í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° codemodëŠ” ì•„ë˜ì— í•´ë‹¹ ë³€ê²½ ì‚¬í•­ê³¼ í•¨ê»˜ ë‚˜ì—´ë˜ì–´ ìˆìœ¼ë©°, ê°œë³„ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

### [ìƒˆ ë””ë ‰í„°ë¦¬ êµ¬ì¡°](#new-directory-structure)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ì¤‘ìš”

NuxtëŠ” ì´ì œ ìƒˆë¡œìš´ ë””ë ‰í„°ë¦¬ êµ¬ì¡°ë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ë©°, í•˜ìœ„ í˜¸í™˜ì„±ì„ ì œê³µí•©ë‹ˆë‹¤(ì˜ˆ: Nuxtê°€ ìƒìœ„ `pages/` ë””ë ‰í„°ë¦¬ ë“± ê¸°ì¡´ êµ¬ì¡°ë¥¼ ê°ì§€í•˜ë©´ ì´ ìƒˆë¡œìš´ êµ¬ì¡°ê°€ ì ìš©ë˜ì§€ ì•ŠìŒ).

ğŸ‘‰ [ì „ì²´ RFC ë³´ê¸°](https://github.com/nuxt/nuxt/issues/26444)

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

* ìƒˆë¡œìš´ Nuxt ê¸°ë³¸ `srcDir`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `app/`ì´ë©°, ëŒ€ë¶€ë¶„ì˜ í•­ëª©ì´ ì´ê³³ì—ì„œ í•´ì„ë©ë‹ˆë‹¤.
* `serverDir`ëŠ” ì´ì œ ê¸°ë³¸ê°’ì´ `<rootDir>/server`ì´ë©°, `<srcDir>/server`ê°€ ì•„ë‹™ë‹ˆë‹¤.
* `layers/`, `modules/`, `public/`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `<rootDir>` ê¸°ì¤€ìœ¼ë¡œ í•´ì„ë©ë‹ˆë‹¤.
* [Nuxt Content v2.13+](https://github.com/nuxt/content/pull/2649)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, `content/`ë„ `<rootDir>` ê¸°ì¤€ìœ¼ë¡œ í•´ì„ë©ë‹ˆë‹¤.
* ìƒˆë¡œìš´ `dir.app`ì´ ì¶”ê°€ë˜ì–´, `router.options.ts`ì™€ `spa-loading-template.html`ì„ ì°¾ëŠ” ë””ë ‰í„°ë¦¬ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ê¸°ë³¸ê°’ì€ `<srcDir>/`ì…ë‹ˆë‹¤.

<details>

<summary>v4 í´ë” êµ¬ì¡° ì˜ˆì‹œì…ë‹ˆë‹¤.</summary>

```sh
.output/
.nuxt/
app/
  assets/
  components/
  composables/
  layouts/
  middleware/
  pages/
  plugins/
  utils/
  app.config.ts
  app.vue
  router.options.ts
content/
layers/
modules/
node_modules/
public/
server/
  api/
  middleware/
  plugins/
  routes/
  utils/
nuxt.config.ts
```

</details>

ğŸ‘‰ ìì„¸í•œ ë‚´ìš©ì€ [ì´ ë³€ê²½ì„ êµ¬í˜„í•œ PR](https://github.com/nuxt/nuxt/pull/27029)ì„ ì°¸ê³ í•˜ì„¸ìš”.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

1. **ì„±ëŠ¥** - ëª¨ë“  ì½”ë“œë¥¼ ì €ì¥ì†Œ ë£¨íŠ¸ì— ë‘ë©´ `.git/` ë° `node_modules/` í´ë”ê°€ FS ê°ì‹œìì— ì˜í•´ ìŠ¤ìº”/í¬í•¨ë˜ì–´ Mac OSê°€ ì•„ë‹Œ í™˜ê²½ì—ì„œ ì‹œì‘ì´ í¬ê²Œ ì§€ì—°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
1. **IDE íƒ€ì… ì•ˆì „ì„±** - `server/`ì™€ ì•±ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì€ ì™„ì „íˆ ë‹¤ë¥¸ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰ë˜ë©°, ì „ì—­ importë„ ë‹¤ë¦…ë‹ˆë‹¤. `server/`ê°€ ì•±ì˜ ë‚˜ë¨¸ì§€ì™€ _ê°™ì€_ í´ë” ì•ˆì— ìˆì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ IDEì—ì„œ ìë™ ì™„ì„± ê¸°ëŠ¥ì„ ì œëŒ€ë¡œ ë°›ëŠ” ì²«ê±¸ìŒì…ë‹ˆë‹¤.

:video-accordion{title="Vue Schoolì—ì„œ ìƒˆ ë””ë ‰í„°ë¦¬ êµ¬ì¡°ë¥¼ ì†Œê°œí•˜ëŠ” ì˜ìƒ ë³´ê¸°" videoId="1031028378" platform="vimeo"}

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

1. `app/`ì´ë¼ëŠ” ìƒˆ ë””ë ‰í„°ë¦¬ë¥¼ ë§Œë“œì„¸ìš”.
1. `assets/`, `components/`, `composables/`, `layouts/`, `middleware/`, `pages/`, `plugins/`, `utils/` í´ë”ì™€ `app.vue`, `error.vue`, `app.config.ts`ë¥¼ ê·¸ ì•„ë˜ë¡œ ì˜®ê¸°ì„¸ìš”. `app/router-options.ts`ë‚˜ `app/spa-loading-template.html`ì´ ìˆë‹¤ë©´ ê²½ë¡œëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.
1. `nuxt.config.ts`, `content/`, `layers/`, `modules/`, `public/`, `server/` í´ë”ëŠ” `app/` í´ë” ë°–, í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ë‚¨ê²¨ë‘ì„¸ìš”.
1. `tailwindcss`ë‚˜ `eslint` ì„¤ì • ë“± ì„œë“œíŒŒí‹° ì„¤ì • íŒŒì¼ë„ ìƒˆ ë””ë ‰í„°ë¦¬ êµ¬ì¡°ì— ë§ê²Œ ì—…ë°ì´íŠ¸í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(í•„ìš”í•œ ê²½ìš° - `@nuxtjs/tailwindcss`ëŠ” ìë™ìœ¼ë¡œ `tailwindcss`ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •í•©ë‹ˆë‹¤).

::tip
`npx codemod@latest nuxt/4/file-structure`ë¥¼ ì‹¤í–‰í•˜ì—¬ ì´ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
::

í•˜ì§€ë§Œ ë§ˆì´ê·¸ë ˆì´ì…˜ì€ _í•„ìˆ˜_ê°€ ì•„ë‹™ë‹ˆë‹¤. í˜„ì¬ í´ë” êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ê³  ì‹¶ë‹¤ë©´ Nuxtê°€ ìë™ìœ¼ë¡œ ê°ì§€í•©ë‹ˆë‹¤. (ê°ì§€í•˜ì§€ ëª»í•˜ë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”.) ë‹¨, ì´ë¯¸ ì»¤ìŠ¤í…€ `srcDir`ë¥¼ ì‚¬ìš© ì¤‘ì´ë¼ë©´ `modules/`, `public/`, `server/` í´ë”ê°€ ì»¤ìŠ¤í…€ `srcDir`ì´ ì•„ë‹Œ `rootDir` ê¸°ì¤€ìœ¼ë¡œ í•´ì„ëœë‹¤ëŠ” ì ì„ ìœ ì˜í•˜ì„¸ìš”. í•„ìš”í•˜ë‹¤ë©´ `dir.modules`, `dir.public`, `serverDir`ë¡œ ì˜¤ë²„ë¼ì´ë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒ ì„¤ì •ìœ¼ë¡œ v3 í´ë” êµ¬ì¡°ë¥¼ ê°•ì œë¡œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  // ìƒˆ srcDir ê¸°ë³¸ê°’ì„ `app`ì—ì„œ ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ë¡œ ë˜ëŒë¦½ë‹ˆë‹¤
  srcDir: '.',
  // `app/router.options.ts`ì™€ `app/spa-loading-template.html`ì˜ ë””ë ‰í„°ë¦¬ ì ‘ë‘ì‚¬ë¥¼ ì§€ì •í•©ë‹ˆë‹¤
  dir: {
    app: 'app'
  }
})
```

### [ì‹±ê¸€í„´ ë°ì´í„° íŒ¨ì¹­ ë ˆì´ì–´](#singleton-data-fetching-layer)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ì¤‘ê°„

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

Nuxtì˜ ë°ì´í„° íŒ¨ì¹­ ì‹œìŠ¤í…œ(`useAsyncData` ë° `useFetch`)ì´ ì„±ëŠ¥ê³¼ ì¼ê´€ì„±ì„ ìœ„í•´ í¬ê²Œ ì¬êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤:

1. **ë™ì¼í•œ í‚¤ì— ëŒ€í•œ ê³µìœ  ref**: ë™ì¼í•œ í‚¤ë¡œ `useAsyncData` ë˜ëŠ” `useFetch`ë¥¼ í˜¸ì¶œí•˜ë©´ ì´ì œ ë™ì¼í•œ `data`, `error`, `status` refë¥¼ ê³µìœ í•©ë‹ˆë‹¤. ì¦‰, ëª…ì‹œì  í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  í˜¸ì¶œì—ì„œ `deep`, `transform`, `pick`, `getCachedData`, `default` ì˜µì…˜ì´ ì¶©ëŒí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.

2. **`getCachedData`ì— ëŒ€í•œ ë” ë§ì€ ì œì–´**: ì´ì œ ë°ì´í„°ê°€ íŒ¨ì¹­ë  ë•Œë§ˆë‹¤(ê°ì‹œìì— ì˜í•´ ë˜ëŠ” `refreshNuxtData` í˜¸ì¶œë¡œ ì¸í•´) `getCachedData` í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤. (ì´ì „ì—ëŠ” í•­ìƒ ìƒˆ ë°ì´í„°ë¥¼ íŒ¨ì¹­í–ˆê³  ì´ í•¨ìˆ˜ëŠ” í˜¸ì¶œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.) ìºì‹œ ë°ì´í„°ë¥¼ ì‚¬ìš©í• ì§€, ë‹¤ì‹œ íŒ¨ì¹­í• ì§€ ë” ì„¸ë°€í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆë„ë¡ í•¨ìˆ˜ì— ìš”ì²­ ì›ì¸ì„ ë‹´ì€ ì»¨í…ìŠ¤íŠ¸ ê°ì²´ê°€ ì „ë‹¬ë©ë‹ˆë‹¤.

3. **ë°˜ì‘í˜• í‚¤ ì§€ì›**: ì´ì œ ê³„ì‚° ref, ì¼ë°˜ ref, getter í•¨ìˆ˜ë¥¼ í‚¤ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ ìë™ ë°ì´í„° ì¬íŒ¨ì¹­(ë° ë°ì´í„° ë³„ë„ ì €ì¥)ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

4. **ë°ì´í„° ì •ë¦¬**: `useAsyncData`ë¡œ íŒ¨ì¹­í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ë§ˆì§€ë§‰ ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ë©´ Nuxtê°€ í•´ë‹¹ ë°ì´í„°ë¥¼ ì œê±°í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ì´ ê³„ì† ì¦ê°€í•˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

ì´ ë³€ê²½ì€ ë©”ëª¨ë¦¬ ì‚¬ìš©ì„ ê°œì„ í•˜ê³ , `useAsyncData` í˜¸ì¶œ ê°„ ë¡œë”© ìƒíƒœì˜ ì¼ê´€ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ë„ì…ë˜ì—ˆìŠµë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

1. **ì˜µì…˜ ë¶ˆì¼ì¹˜ í™•ì¸**: ë™ì¼í•œ í‚¤ë¡œ ë‹¤ë¥¸ ì˜µì…˜ì´ë‚˜ íŒ¨ì¹­ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì ê²€í•˜ì„¸ìš”.

   ```ts
   // ì´ì œ ê²½ê³ ê°€ ë°œìƒí•©ë‹ˆë‹¤
   const { data: users1 } = useAsyncData('users', () => $fetch('/api/users'), { deep: false })
   const { data: users2 } = useAsyncData('users', () => $fetch('/api/users'), { deep: true })
   ```

   ëª…ì‹œì  í‚¤ë¥¼ ê³µìœ í•˜ë©´ì„œ ì»¤ìŠ¤í…€ ì˜µì…˜ì„ ì‚¬ìš©í•˜ëŠ” `useAsyncData` í˜¸ì¶œì€ ë³„ë„ì˜ composableë¡œ ì¶”ì¶œí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤:

   ```ts [composables/useUserData.ts]
   export function useUserData(userId: string) {
     return useAsyncData(
       `user-${userId}`,
       () => fetchUser(userId),
       { 
         deep: true,
         transform: (user) => ({ ...user, lastAccessed: new Date() })
       }
     )
   }
   ```

2. **`getCachedData` êµ¬í˜„ ì—…ë°ì´íŠ¸**:

   ```diff
   useAsyncData('key', fetchFunction, {
   -  getCachedData: (key, nuxtApp) => {
   -    return cachedData[key]
   -  }
   +  getCachedData: (key, nuxtApp, ctx) => {
   +    // ctx.cause - 'initial' | 'refresh:hook' | 'refresh:manual' | 'watch' ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤
   +    
   +    // ì˜ˆì‹œ: ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ ì‹œì—ëŠ” ìºì‹œë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
   +    if (ctx.cause === 'refresh:manual') return undefined
   +    
   +    return cachedData[key]
   +  }
   })
   ```

ë˜ëŠ”, ë‹¹ë¶„ê°„ ì´ ë™ì‘ì„ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    granularCachedData: false,
    purgeCachedData: false
  }
})
```

### [ë¼ìš°íŠ¸ ë©”íƒ€ë°ì´í„° ì¤‘ë³µ ì œê±°](#deduplication-of-route-metadata)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

`definePageMeta`ë¥¼ ì‚¬ìš©í•´ ë¼ìš°íŠ¸ ë©”íƒ€ë°ì´í„°(ì˜ˆ: `name`, `path` ë“±)ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì „ì—ëŠ” ì´ ê°’ë“¤ì´ ë¼ìš°íŠ¸ì™€ ë¼ìš°íŠ¸ ë©”íƒ€ë°ì´í„° ëª¨ë‘ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í–ˆìŠµë‹ˆë‹¤(ì˜ˆ: `route.name`, `route.meta.name`).

ì´ì œëŠ” ë¼ìš°íŠ¸ ê°ì²´ì—ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

ì´ëŠ” `experimental.scanPageMeta`ë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ í™œì„±í™”í•œ ê²°ê³¼ì´ë©°, ì„±ëŠ¥ ìµœì í™” ëª©ì ì…ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ë§ˆì´ê·¸ë ˆì´ì…˜ì€ ê°„ë‹¨í•©ë‹ˆë‹¤:

```diff
  const route = useRoute()
  
- console.log(route.meta.name)
+ console.log(route.name)
```

### [ì»´í¬ë„ŒíŠ¸ ì´ë¦„ ì •ê·œí™”](#normalized-component-names)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ì¤‘ê°„

VueëŠ” ì´ì œ Nuxtì˜ ì»´í¬ë„ŒíŠ¸ ë„¤ì´ë° íŒ¨í„´ê³¼ ì¼ì¹˜í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ì´ë¦„ì„ ìƒì„±í•©ë‹ˆë‹¤.

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

ê¸°ë³¸ì ìœ¼ë¡œ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•˜ì§€ ì•Šì•˜ë‹¤ë©´,
VueëŠ” ì»´í¬ë„ŒíŠ¸ì˜ íŒŒì¼ëª…ì„ ì»´í¬ë„ŒíŠ¸ ì´ë¦„ìœ¼ë¡œ í• ë‹¹í•©ë‹ˆë‹¤.

```bash [ë””ë ‰í„°ë¦¬ êµ¬ì¡°]
â”œâ”€ components/
â”œâ”€â”€â”€ SomeFolder/
â”œâ”€â”€â”€â”€â”€ MyComponent.vue
```

ì´ ê²½ìš°, Vue ì…ì¥ì—ì„œëŠ” ì»´í¬ë„ŒíŠ¸ ì´ë¦„ì´ `MyComponent`ì…ë‹ˆë‹¤. `<KeepAlive>`ì—ì„œ ì‚¬ìš©í•˜ê±°ë‚˜ Vue DevToolsì—ì„œ ì‹ë³„í•˜ë ¤ë©´ ì´ ì´ë¦„ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ìë™ importë¥¼ í•˜ë ¤ë©´ `SomeFolderMyComponent`ë¥¼ ì‚¬ìš©í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

ì´ ë³€ê²½ìœ¼ë¡œ ë‘ ê°’ì´ ì¼ì¹˜í•˜ê²Œ ë˜ë©°, Vueê°€ Nuxtì˜ ì»´í¬ë„ŒíŠ¸ ë„¤ì´ë° íŒ¨í„´ê³¼ ì¼ì¹˜í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ì´ë¦„ì„ ìƒì„±í•©ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

`@vue/test-utils`ì˜ `findComponent`ë¥¼ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ë‚˜, ì»´í¬ë„ŒíŠ¸ ì´ë¦„ì— ì˜ì¡´í•˜ëŠ” `<KeepAlive>`ì—ì„œ ì—…ë°ì´íŠ¸ëœ ì´ë¦„ì„ ì‚¬ìš©í•˜ì„¸ìš”.

ë˜ëŠ”, ë‹¹ë¶„ê°„ ì´ ë™ì‘ì„ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    normalizeComponentNames: false
  }
})
```

### [Unhead v2](#unhead-v2)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

[Unhead](https://unhead.unjs.io/)ëŠ” `<head>` íƒœê·¸ ìƒì„±ì„ ë‹´ë‹¹í•˜ë©°, ë²„ì „ 2ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.
ëŒ€ë¶€ë¶„ í˜¸í™˜ë˜ì§€ë§Œ, ì €ìˆ˜ì¤€ APIì— ëª‡ ê°€ì§€ íŒŒê´´ì  ë³€ê²½ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

* ì œê±°ëœ props: `vmid`, `hid`, `children`, `body`.
* Promise ì…ë ¥ ì§€ì› ì¤‘ë‹¨.
* íƒœê·¸ê°€ ê¸°ë³¸ì ìœ¼ë¡œ Capo.jsë¡œ ì •ë ¬ë©ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ìœ„ ë³€ê²½ ì‚¬í•­ì€ ì•±ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.

ë¬¸ì œê°€ ìˆë‹¤ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

* ì œê±°ëœ propsë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

```diff
useHead({
  meta: [{ 
    name: 'description', 
    // meta íƒœê·¸ì—ëŠ” vmidë‚˜ keyê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤    
-   vmid: 'description' 
-   hid: 'description'
  }]
})
```

* [Template Params](https://unhead.unjs.io/docs/head/guides/plugins/template-params)ë‚˜ [Alias Tag Sorting](https://unhead.unjs.io/docs/head/guides/plugins/alias-sorting)ì„ ì‚¬ìš© ì¤‘ì´ë¼ë©´, ì´ì œ ëª…ì‹œì ìœ¼ë¡œ í•´ë‹¹ ê¸°ëŠ¥ì„ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤.

```ts
import { TemplateParamsPlugin, AliasSortingPlugin } from '@unhead/vue/plugins'

export default defineNuxtPlugin({
  setup() {
    const unhead = injectHead()
    unhead.use(TemplateParamsPlugin)
    unhead.use(AliasSortingPlugin)
  }
})
```

í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ, `@unhead/vue`ì—ì„œ `#imports` ë˜ëŠ” `nuxt/app`ìœ¼ë¡œ importë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤.

```diff
-import { useHead } from '@unhead/vue'
+import { useHead } from '#imports'
```

ë¬¸ì œê°€ ê³„ì†ëœë‹¤ë©´ `head.legacy` ì„¤ì •ì„ í™œì„±í™”í•˜ì—¬ v1 ë™ì‘ìœ¼ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
export default defineNuxtConfig({
  unhead: {
    legacy: true,
  }
})
```

### [SPA ë¡œë”© í™”ë©´ì˜ ìƒˆë¡œìš´ DOM ìœ„ì¹˜](#new-dom-location-for-spa-loading-screen)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

í´ë¼ì´ì–¸íŠ¸ ì „ìš© í˜ì´ì§€(`ssr: false`)ë¥¼ ë Œë”ë§í•  ë•Œ, Nuxt ì•± ë£¨íŠ¸ ë‚´ì— ë¡œë”© í™”ë©´(`app/spa-loading-template.html`)ì„ ì„ íƒì ìœ¼ë¡œ ë Œë”ë§í•©ë‹ˆë‹¤:

```html
<div id="__nuxt">
  <!-- spa loading template -->
</div>
```

ì´ì œ ê¸°ë³¸ì ìœ¼ë¡œ Nuxt ì•± ë£¨íŠ¸ ì˜†ì— í…œí”Œë¦¿ì„ ë Œë”ë§í•©ë‹ˆë‹¤:

```html
<div id="__nuxt"></div>
<!-- spa loading template -->
```

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

SPA ë¡œë”© í…œí”Œë¦¿ì´ Vue ì•± suspenseê°€ í•´ì œë  ë•Œê¹Œì§€ DOMì— ë‚¨ì•„ ìˆì–´ í° í™”ë©´ì´ ê¹œë¹¡ì´ëŠ” í˜„ìƒì„ ë°©ì§€í•©ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

CSSë‚˜ `document.queryElement`ë¡œ spa ë¡œë”© í…œí”Œë¦¿ì„ íƒ€ê²ŸíŒ…í–ˆë‹¤ë©´ ì…€ë ‰í„°ë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ëª©ì ì„ ìœ„í•´ ìƒˆë¡œìš´ `app.spaLoaderTag` ë° `app.spaLoaderAttrs` ì„¤ì • ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜ëŠ”, ì´ì „ ë™ì‘ìœ¼ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    spaLoadingTemplateLocation: 'within',
  }
})
```

### [íŒŒì‹±ëœ `error.data`](#parsed-errordata)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

`data` ì†ì„±ì´ ìˆëŠ” ì—ëŸ¬ë¥¼ throwí•  ìˆ˜ ìˆì—ˆì§€ë§Œ, ì´ì „ì—ëŠ” íŒŒì‹±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ì œ íŒŒì‹±ë˜ì–´ `error` ê°ì²´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë²„ê·¸ ìˆ˜ì •ì´ì§€ë§Œ, ì´ì „ ë™ì‘ì— ì˜ì¡´í•´ ìˆ˜ë™ìœ¼ë¡œ íŒŒì‹±í–ˆë‹¤ë©´ íŒŒê´´ì  ë³€ê²½ì…ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ì»¤ìŠ¤í…€ `error.vue`ì—ì„œ `error.data`ì˜ ì¶”ê°€ íŒŒì‹±ì„ ì œê±°í•˜ì„¸ìš”:

```diff
  <script setup lang="ts">
  import type { NuxtError } from '#app'

  const props = defineProps({
    error: Object as () => NuxtError
  })

- const data = JSON.parse(error.data)
+ const data = error.data
  </script>
```

ë˜ëŠ”, ì´ ë³€ê²½ì„ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    parseErrorData: false
  },
})
```

### [ë” ì„¸ë°€í•œ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼](#more-granular-inline-styles)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ì¤‘ê°„

NuxtëŠ” ì´ì œ Vue ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ì„œë§Œ ìŠ¤íƒ€ì¼ì„ ì¸ë¼ì¸í•˜ë©°, ê¸€ë¡œë²Œ CSSëŠ” ì¸ë¼ì¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

ì´ì „ì—ëŠ” Nuxtê°€ ëª¨ë“  CSS(ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼ í¬í•¨)ë¥¼ ì¸ë¼ì¸í•˜ê³ , ë³„ë„ì˜ CSS íŒŒì¼ì— ëŒ€í•œ `<link>` ìš”ì†Œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤. ì´ì œ NuxtëŠ” Vue ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ì„œë§Œ ì´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤(ì´ì „ì—ëŠ” ë³„ë„ì˜ CSS ì²­í¬ë¥¼ ìƒì„±). ì´ëŠ” ë³„ë„ì˜ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ì¤„ì´ë©´ì„œ(ì´ˆê¸° ë¡œë“œ ì‹œ í˜ì´ì§€ë³„/ì»´í¬ë„ŒíŠ¸ë³„ `.css` íŒŒì¼ì— ëŒ€í•œ ë³„ë„ ìš”ì²­ì´ ì—†ìŒ), ë‹¨ì¼ ê¸€ë¡œë²Œ CSS íŒŒì¼ì˜ ìºì‹±ì„ í—ˆìš©í•˜ê³ , ì´ˆê¸° ìš”ì²­ì˜ ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ í¬ê¸°ë¥¼ ì¤„ì´ëŠ” ë” ë‚˜ì€ ê· í˜•ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ì´ ê¸°ëŠ¥ì€ ì™„ì „íˆ ì„¤ì • ê°€ëŠ¥í•˜ë©°, `inlineStyles: true`ë¡œ ê¸€ë¡œë²Œ CSSì™€ ì»´í¬ë„ŒíŠ¸ë³„ CSS ëª¨ë‘ ì¸ë¼ì¸í•˜ë„ë¡ ì´ì „ ë™ì‘ìœ¼ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  features: {
    inlineStyles: true
  }
})
```

### [í˜ì´ì§€ ë©”íƒ€ ìŠ¤ìº” ì‹œì  ë³€ê²½](#scan-page-meta-after-resolution)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

ì´ì œ `definePageMeta`ì— ì •ì˜ëœ í˜ì´ì§€ ë©”íƒ€ë°ì´í„°ë¥¼ `pages:extend` í›… í˜¸ì¶œ _ì´í›„_ì— ìŠ¤ìº”í•©ë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

ì‚¬ìš©ìê°€ `pages:extend`ì—ì„œ ì¶”ê°€í•˜ê³ ì í•˜ëŠ” í˜ì´ì§€ì˜ ë©”íƒ€ë°ì´í„°ë„ ìŠ¤ìº”í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. ì´ì œ ìƒˆë¡œìš´ `pages:resolved` í›…ì—ì„œ í˜ì´ì§€ ë©”íƒ€ë°ì´í„°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ì˜¤ë²„ë¼ì´ë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

í˜ì´ì§€ ë©”íƒ€ë°ì´í„°ë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ë ¤ë©´ `pages:extend`ê°€ ì•„ë‹ˆë¼ `pages:resolved`ì—ì„œ ì²˜ë¦¬í•˜ì„¸ìš”.

```diff
  export default defineNuxtConfig({
    hooks: {
-     'pages:extend'(pages) {
+     'pages:resolved'(pages) {
        const myPage = pages.find(page => page.path === '/')
        myPage.meta ||= {}
        myPage.meta.layout = 'overridden-layout'
      }
    }
  })
```

ë˜ëŠ”, ì´ì „ ë™ì‘ìœ¼ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    scanPageMeta: true
  }
})
```

### [ê³µìœ  í”„ë¦¬ë Œë” ë°ì´í„°](#shared-prerender-data)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ì¤‘ê°„

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

ì´ì „ì—ëŠ” ì‹¤í—˜ì ì´ì—ˆë˜ ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ì—¬, `useAsyncData` ë° `useFetch` í˜¸ì¶œì˜ ë°ì´í„°ë¥¼ ì„œë¡œ ë‹¤ë¥¸ í˜ì´ì§€ ê°„ì— ê³µìœ í•©ë‹ˆë‹¤. [ì›ë³¸ PR](https://github.com/nuxt/nuxt/pull/24894) ì°¸ê³ .

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

ì´ ê¸°ëŠ¥ì€ í”„ë¦¬ë Œë”ë§ëœ í˜ì´ì§€ ê°„ì— payload _data_ë¥¼ ìë™ìœ¼ë¡œ ê³µìœ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ í˜ì´ì§€ì—ì„œ ë™ì¼í•œ ë°ì´í„°ë¥¼ íŒ¨ì¹­í•˜ëŠ” ê²½ìš°, ì²« ë²ˆì§¸ í˜ì´ì§€ì—ì„œë§Œ ë°ì´í„°ë¥¼ íŒ¨ì¹­í•˜ê³  ì´í›„ì—ëŠ” ìºì‹œë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ í”„ë¦¬ë Œë”ë§ ì„±ëŠ¥ì´ í¬ê²Œ í–¥ìƒë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ëª¨ë“  í˜ì´ì§€ì—ì„œ ë©”ë‰´ìš© ë„¤ë¹„ê²Œì´ì…˜ ë°ì´í„°ë‚˜ CMSì—ì„œ ì‚¬ì´íŠ¸ ì„¤ì •ì„ ê°€ì ¸ì˜¤ëŠ” `useFetch` í˜¸ì¶œì´ í•„ìš”í•œ ê²½ìš°, í•´ë‹¹ ë°ì´í„°ëŠ” ì²˜ìŒ í•œ ë²ˆë§Œ íŒ¨ì¹­ë˜ê³  ì´í›„ì—ëŠ” ìºì‹œë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ë°ì´í„°ì˜ ê³ ìœ  í‚¤ê°€ í•­ìƒ ë™ì¼í•œ ë°ì´í„°ë¥¼ ê°€ë¦¬í‚¤ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, íŠ¹ì • í˜ì´ì§€ì™€ ê´€ë ¨ëœ ë°ì´í„°ë¥¼ íŒ¨ì¹­í•  ë•ŒëŠ” í•´ë‹¹ ë°ì´í„°ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆëŠ” í‚¤ë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤. (`useFetch`ëŠ” ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.)

```ts [app/pages/test/[slug\\].vue]
// ë™ì  í˜ì´ì§€(ì˜ˆ: `[slug].vue`)ì—ì„œ route slugì— ë”°ë¼ íŒ¨ì¹­ ë°ì´í„°ê°€ ë‹¬ë¼ì§€ë¯€ë¡œ,
// í‚¤ì— ë°˜ì˜í•˜ì§€ ì•Šìœ¼ë©´ ì•ˆì „í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
const route = useRoute()
const { data } = await useAsyncData(async () => {
  return await $fetch(`/api/my-page/${route.params.slug}`)
})
// ëŒ€ì‹ , íŒ¨ì¹­ ë°ì´í„°ì— ê³ ìœ í•˜ê²Œ ë§¤ì¹­ë˜ëŠ” í‚¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
const { data } = await useAsyncData(route.params.slug, async () => {
  return await $fetch(`/api/my-page/${route.params.slug}`)
})
```

ë˜ëŠ”, ì´ ê¸°ëŠ¥ì„ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    sharedPrerenderData: false
  }
})
```

### [`useAsyncData` ë° `useFetch`ì˜ ê¸°ë³¸ `data` ë° `error` ê°’](#default-data-and-error-values-in-useasyncdata-and-usefetch)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

`useAsyncData`ì—ì„œ ë°˜í™˜ë˜ëŠ” `data` ë° `error` ê°ì²´ì˜ ê¸°ë³¸ê°’ì´ ì´ì œ `undefined`ì…ë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

ì´ì „ì—ëŠ” `data`ê°€ `null`ë¡œ ì´ˆê¸°í™”ë˜ì—ˆì§€ë§Œ, `clearNuxtData`ì—ì„œëŠ” `undefined`ë¡œ ë¦¬ì…‹ë˜ì—ˆìŠµë‹ˆë‹¤. `error`ëŠ” `null`ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì¼ê´€ì„±ì„ ë†’ì´ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

`data.value`ë‚˜ `error.value`ê°€ `null`ì¸ì§€ í™•ì¸í–ˆë‹¤ë©´, ì´ì œ `undefined`ë¥¼ í™•ì¸í•˜ë„ë¡ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.

::tip
`npx codemod@latest nuxt/4/default-data-error-value`ë¥¼ ì‹¤í–‰í•˜ì—¬ ì´ ë‹¨ê³„ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
::

ë¬¸ì œê°€ ìˆë‹¤ë©´ ì´ì „ ë™ì‘ìœ¼ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    defaults: {
      useAsyncData: {
        value: 'null',
        errorValue: 'null'
      }
    }
  }
})
```

ì´ë ‡ê²Œ í•˜ëŠ” ê²½ìš° ì´ìŠˆë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”. ì´ ì„¤ì •ì€ ê³„ì† ìœ ì§€í•  ê³„íšì´ ì—†ìŠµë‹ˆë‹¤.

### [`useAsyncData` ë° `useFetch`ì—ì„œ `refresh` í˜¸ì¶œ ì‹œ `dedupe` ì˜µì…˜ì˜ deprecated `boolean` ê°’ ì œê±°](#removal-of-deprecated-boolean-values-for-dedupe-option-when-calling-refresh-in-useasyncdata-and-usefetch)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

ì´ì „ì—ëŠ” `refresh`ì— `dedupe: boolean`ì„ ì „ë‹¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ê°ê° `cancel`(`true`)ê³¼ `defer`(`false`)ì˜ ë³„ì¹­ì´ì—ˆìŠµë‹ˆë‹¤.

```ts twoslash [app.vue]
const { refresh } = await useAsyncData(async () => ({ message: 'Hello, Nuxt!' }))

async function refreshData () {
  await refresh({ dedupe: true })
}
```

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

ë” ëª…í™•í•˜ê²Œ í•˜ê¸° ìœ„í•´ ì´ ë³„ì¹­ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.

`useAsyncData`ì— `dedupe` ì˜µì…˜ì„ ì¶”ê°€í•˜ë©´ì„œ, boolean ê°’ì´ _ë°˜ëŒ€_ ì˜ë¯¸ê°€ ë˜ì–´ í˜¼ë€ì„ ì•¼ê¸°í–ˆìŠµë‹ˆë‹¤.

`refresh({ dedupe: false })`ëŠ” **ê¸°ì¡´ ìš”ì²­ì„ ì·¨ì†Œí•˜ì§€ ì•Šê³  ìƒˆ ìš”ì²­ì„ ì‹¤í–‰**í•˜ëŠ” ì˜ë¯¸ì˜€ê³ , `useAsyncData` ì˜µì…˜ì˜ `dedupe: true`ëŠ” **ê¸°ì¡´ ëŒ€ê¸° ì¤‘ì¸ ìš”ì²­ì´ ìˆìœ¼ë©´ ìƒˆ ìš”ì²­ì„ ë§Œë“¤ì§€ ì•ŠìŒ**ì„ ì˜ë¯¸í–ˆìŠµë‹ˆë‹¤. ([PR ì°¸ê³ ](https://github.com/nuxt/nuxt/pull/24564#pullrequestreview-1764584361).)

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ë§ˆì´ê·¸ë ˆì´ì…˜ì€ ê°„ë‹¨í•©ë‹ˆë‹¤:

```diff
  const { refresh } = await useAsyncData(async () => ({ message: 'Hello, Nuxt 3!' }))
  
  async function refreshData () {
-   await refresh({ dedupe: true })
+   await refresh({ dedupe: 'cancel' })

-   await refresh({ dedupe: false })
+   await refresh({ dedupe: 'defer' })
  }
```

::tip
`npx codemod@latest nuxt/4/deprecated-dedupe-value`ë¥¼ ì‹¤í–‰í•˜ì—¬ ì´ ë‹¨ê³„ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
::

### [`useAsyncData` ë° `useFetch`ì—ì„œ `data`ë¥¼ clearí•  ë•Œ ê¸°ë³¸ê°’ ì¡´ì¤‘](#respect-defaults-when-clearing-data-in-useasyncdata-and-usefetch)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

`useAsyncData`ì— ì»¤ìŠ¤í…€ `default` ê°’ì„ ì œê³µí•˜ë©´, ì´ì œ `clear` ë˜ëŠ” `clearNuxtData` í˜¸ì¶œ ì‹œ í•´ë‹¹ ê¸°ë³¸ê°’ìœ¼ë¡œ ë¦¬ì…‹ë©ë‹ˆë‹¤(ë‹¨ìˆœíˆ í•´ì œë˜ì§€ ì•ŠìŒ).

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

ì‚¬ìš©ìëŠ” ì¢…ì¢… ë¹ˆ ë°°ì—´ ë“± ì ì ˆí•œ ë¹ˆ ê°’ì„ ì„¤ì •í•˜ì—¬ ë°˜ë³µ ì‹œ `null`/`undefined` ì²´í¬ë¥¼ í”¼í•˜ê³ ì í•©ë‹ˆë‹¤. ì´ ê°’ì´ ë¦¬ì…‹/clear ì‹œì—ë„ ì¡´ì¤‘ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ë¬¸ì œê°€ ìˆë‹¤ë©´, ë‹¹ë¶„ê°„ ì´ì „ ë™ì‘ìœ¼ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    resetAsyncDataToUndefined: true,
  }
})
```

ì´ë ‡ê²Œ í•˜ëŠ” ê²½ìš° ì´ìŠˆë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”. ì´ ì„¤ì •ì€ ê³„ì† ìœ ì§€í•  ê³„íšì´ ì—†ìŠµë‹ˆë‹¤.

### [`useAsyncData` ë° `useFetch`ì˜ `pending` ê°’ ì •ë ¬](#alignment-of-pending-value-in-useasyncdata-and-usefetch)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ì¤‘ê°„

`useAsyncData`, `useFetch`, `useLazyAsyncData`, `useLazyFetch`ì—ì„œ ë°˜í™˜ë˜ëŠ” `pending` ê°ì²´ëŠ” ì´ì œ `status`ê°€ pendingì¼ ë•Œë§Œ `true`ì¸ ê³„ì‚° ì†ì„±ì…ë‹ˆë‹¤.

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

ì´ì œ `immediate: false`ë¥¼ ì „ë‹¬í•˜ë©´, ì²« ìš”ì²­ì´ ì‹¤í–‰ë  ë•Œê¹Œì§€ `pending`ì€ `false`ì…ë‹ˆë‹¤. ì´ì „ì—ëŠ” ì²« ìš”ì²­ ì „ê¹Œì§€ í•­ìƒ `pending`ì´ `true`ì˜€ìŠµë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

`pending`ì˜ ì˜ë¯¸ë¥¼ `status` ì†ì„±ê³¼ ì¼ì¹˜ì‹œí‚¤ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. `status`ë„ ìš”ì²­ì´ ì§„í–‰ ì¤‘ì¼ ë•Œë§Œ `pending`ì…ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

`pending` ì†ì„±ì— ì˜ì¡´í•œë‹¤ë©´, ì´ì œ `pending`ì´ `status`ê°€ pendingì¼ ë•Œë§Œ `true`ì„ì„ ê³ ë ¤í•´ ë¡œì§ì„ ìˆ˜ì •í•˜ì„¸ìš”.

```diff
  <template>
-   <div v-if="!pending">
+   <div v-if="status === 'success'">
      <p>Data: {{ data }}</p>
    </div>
    <div v-else>
      <p>Loading...</p>
    </div>
  </template>
  <script setup lang="ts">
  const { data, pending, execute, status } = await useAsyncData(() => fetch('/api/data'), {
    immediate: false
  })
  onMounted(() => execute())
  </script>
```

ë˜ëŠ”, ì´ì „ ë™ì‘ìœ¼ë¡œ ì„ì‹œ ë³µê·€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    pendingWhenIdle: true
  }
})
```

### [`useAsyncData` ë° `useFetch`ì˜ í‚¤ ë³€ê²½ ë™ì‘](#key-change-behavior-in-useasyncdata-and-usefetch)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ì¤‘ê°„

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

`useAsyncData`ë‚˜ `useFetch`ì—ì„œ ë°˜ì‘í˜• í‚¤ë¥¼ ì‚¬ìš©í•  ë•Œ, í‚¤ê°€ ë³€ê²½ë˜ë©´ Nuxtê°€ ìë™ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¬íŒ¨ì¹­í•©ë‹ˆë‹¤. `immediate: false`ê°€ ì„¤ì •ëœ ê²½ìš°, ë°ì´í„°ê°€ í•œ ë²ˆì´ë¼ë„ íŒ¨ì¹­ëœ í›„ì—ë§Œ í‚¤ ë³€ê²½ ì‹œ ë°ì´í„°ë¥¼ íŒ¨ì¹­í•©ë‹ˆë‹¤.

ì´ì „ì—ëŠ” `useFetch`ê°€ ì•½ê°„ ë‹¤ë¥´ê²Œ ë™ì‘í•˜ì—¬, í‚¤ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•­ìƒ ë°ì´í„°ë¥¼ íŒ¨ì¹­í–ˆìŠµë‹ˆë‹¤.

ì´ì œ `useFetch`ì™€ `useAsyncData`ê°€ ì¼ê´€ë˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤ - ë°ì´í„°ê°€ í•œ ë²ˆì´ë¼ë„ íŒ¨ì¹­ëœ í›„ì—ë§Œ í‚¤ ë³€ê²½ ì‹œ ë°ì´í„°ë¥¼ íŒ¨ì¹­í•©ë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

`useAsyncData`ì™€ `useFetch`ì˜ ë™ì‘ì„ ì¼ê´€ë˜ê²Œ í•˜ì—¬, ì˜ˆê¸°ì¹˜ ì•Šì€ íŒ¨ì¹­ì„ ë°©ì§€í•©ë‹ˆë‹¤. `immediate: false`ë¥¼ ì„¤ì •í–ˆë‹¤ë©´, ë°˜ë“œì‹œ `refresh`ë‚˜ `execute`ë¥¼ í˜¸ì¶œí•´ì•¼ `useFetch`ë‚˜ `useAsyncData`ì—ì„œ ë°ì´í„°ê°€ íŒ¨ì¹­ë©ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ì´ ë³€ê²½ì€ ì¼ë°˜ì ìœ¼ë¡œ ê¸°ëŒ€ ë™ì‘ì„ ê°œì„ í•˜ì§€ë§Œ, non-immediate `useFetch`ì—ì„œ í‚¤ë‚˜ ì˜µì…˜ ë³€ê²½ ì‹œ ìë™ íŒ¨ì¹­ì„ ê¸°ëŒ€í–ˆë‹¤ë©´, ì´ì œëŠ” ì²« ì‹¤í–‰ì„ ìˆ˜ë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°í•´ì•¼ í•©ë‹ˆë‹¤.

```diff
  const id = ref('123')
  const { data, execute } = await useFetch('/api/test', {
    query: { id },
    immediate: false
  )
+ watch(id, execute, { once: true })
```

ì´ ë™ì‘ì„ ë¹„í™œì„±í™”í•˜ë ¤ë©´:

```ts
// ë˜ëŠ” Nuxt ì„¤ì •ì—ì„œ ì „ì—­ì ìœ¼ë¡œ
export default defineNuxtConfig({
  experimental: {
    alwaysRunFetchOnKeyChange: true
  }
})
```

### [`useAsyncData` ë° `useFetch`ì˜ ì–•ì€ ë°ì´í„° ë°˜ì‘ì„±](#shallow-data-reactivity-in-useasyncdata-and-usefetch)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

`useAsyncData`, `useFetch`, `useLazyAsyncData`, `useLazyFetch`ì—ì„œ ë°˜í™˜ë˜ëŠ” `data` ê°ì²´ëŠ” ì´ì œ `ref`ê°€ ì•„ë‹Œ `shallowRef`ì…ë‹ˆë‹¤.

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

ìƒˆ ë°ì´í„°ë¥¼ íŒ¨ì¹­í•˜ë©´, `data`ì— ì˜ì¡´í•˜ëŠ” ëª¨ë“  í•­ëª©ì´ ì—¬ì „íˆ ë°˜ì‘ì„±ì„ ê°€ì§‘ë‹ˆë‹¤(ì „ì²´ ê°ì²´ê°€ êµì²´ë¨). í•˜ì§€ë§Œ ë°ì´í„° êµ¬ì¡° ë‚´ì˜ ì†ì„±ë§Œ ë³€ê²½í•˜ë©´ ì•±ì—ì„œ ë°˜ì‘ì„±ì´ íŠ¸ë¦¬ê±°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

ê¹Šê²Œ ì¤‘ì²©ëœ ê°ì²´ì™€ ë°°ì—´ì— ëŒ€í•´ Vueê°€ ëª¨ë“  ì†ì„±/ë°°ì—´ì„ ê°ì‹œí•˜ì§€ ì•Šì•„ë„ ë˜ë¯€ë¡œ **ì„±ëŠ¥ì´ í¬ê²Œ** í–¥ìƒë©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš°, `data`ëŠ” ë¶ˆë³€ì´ì–´ì•¼ í•©ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ë³„ë„ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ í•„ìš” ì—†ì§€ë§Œ, ë°ì´í„° ê°ì²´ì˜ ë°˜ì‘ì„±ì— ì˜ì¡´í•œë‹¤ë©´ ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤:

1. ì»´í¬ì €ë¸” ë‹¨ìœ„ë¡œ ê¹Šì€ ë°˜ì‘ì„±ì„ ì„ íƒì ìœ¼ë¡œ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
   ```diff
   - const { data } = useFetch('/api/test')
   + const { data } = useFetch('/api/test', { deep: true })
   ```
1. í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ê¸°ë³¸ ë™ì‘ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ê¶Œì¥í•˜ì§€ ì•ŠìŒ):
   ```ts twoslash [nuxt.config.ts]
   export default defineNuxtConfig({
     experimental: {
       defaults: {
         useAsyncData: {
           deep: true
         }
       }
     }
   })
   ```

::tip
í•„ìš”í•˜ë‹¤ë©´ `npx codemod@latest nuxt/4/shallow-function-reactivity`ë¥¼ ì‹¤í–‰í•˜ì—¬ ì´ ë‹¨ê³„ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
::

### [`builder:watch`ì˜ ì ˆëŒ€ ê²½ë¡œ ê°ì‹œ](#absolute-watch-paths-in-builderwatch)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

Nuxtì˜ `builder:watch` í›…ì´ ì´ì œ í”„ë¡œì íŠ¸ `srcDir` ê¸°ì¤€ ìƒëŒ€ ê²½ë¡œê°€ ì•„ë‹Œ ì ˆëŒ€ ê²½ë¡œë¥¼ ë‚´ë³´ëƒ…ë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

`srcDir` ì™¸ë¶€ì˜ ê²½ë¡œ ê°ì‹œë¥¼ ì§€ì›í•˜ê³ , ë ˆì´ì–´ ë“± ë” ë³µì¡í•œ íŒ¨í„´ì„ ë” ì˜ ì§€ì›í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ì´ í›…ì„ ì‚¬ìš©í•˜ëŠ” ê³µê°œ Nuxt ëª¨ë“ˆì€ ì´ë¯¸ ì‚¬ì „ ë§ˆì´ê·¸ë ˆì´ì…˜ë˜ì—ˆìŠµë‹ˆë‹¤. [ì´ìŠˆ #25339](https://github.com/nuxt/nuxt/issues/25339) ì°¸ê³ .

í•˜ì§€ë§Œ, `builder:watch` í›…ì„ ì‚¬ìš©í•˜ëŠ” ëª¨ë“ˆ ì‘ì„±ìë¼ë©´, Nuxt v3/v4 ëª¨ë‘ì—ì„œ ë™ì¼í•˜ê²Œ ë™ì‘í•˜ë„ë¡ ë‹¤ìŒ ì½”ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```diff
+ import { relative, resolve } from 'node:fs'
  // ...
  nuxt.hook('builder:watch', async (event, path) => {
+   path = relative(nuxt.options.srcDir, resolve(nuxt.options.srcDir, path))
    // ...
  })
```

::tip
`npx codemod@latest nuxt/4/absolute-watch-path`ë¥¼ ì‹¤í–‰í•˜ì—¬ ì´ ë‹¨ê³„ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
::

### [`window.__NUXT__` ê°ì²´ ì œê±°](#removal-of-windownuxt-object)

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

ì•±ì´ hydrationì„ ë§ˆì¹˜ë©´ ì „ì—­ `window.__NUXT__` ê°ì²´ë¥¼ ì œê±°í•©ë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

ì´ëŠ” ë©€í‹° ì•± íŒ¨í„´([#21635](https://github.com/nuxt/nuxt/issues/21635))ì„ ì§€ì›í•˜ê³ , Nuxt ì•± ë°ì´í„°ë¥¼ ì ‘ê·¼í•˜ëŠ” ë‹¨ì¼ ë°©ë²•ì¸ `useNuxtApp()`ì— ì§‘ì¤‘í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ë°ì´í„°ëŠ” ì—¬ì „íˆ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, `useNuxtApp().payload`ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```diff
- console.log(window.__NUXT__)
+ console.log(useNuxtApp().payload)
```

### [ë””ë ‰í„°ë¦¬ ì¸ë±ìŠ¤ ìŠ¤ìºë‹](#directory-index-scanning)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ì¤‘ê°„

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

`middleware/` í´ë”ì˜ í•˜ìœ„ í´ë”ë„ `index` íŒŒì¼ì„ ìŠ¤ìº”í•˜ë©°, ì´ì œ ì´ë“¤ë„ í”„ë¡œì íŠ¸ì˜ ë¯¸ë“¤ì›¨ì–´ë¡œ ë“±ë¡ë©ë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

NuxtëŠ” `middleware/`, `plugins/` ë“± ì—¬ëŸ¬ í´ë”ë¥¼ ìë™ìœ¼ë¡œ ìŠ¤ìº”í•©ë‹ˆë‹¤.

`plugins/`ì˜ í•˜ìœ„ í´ë”ë„ `index` íŒŒì¼ì„ ìŠ¤ìº”í•˜ë¯€ë¡œ, ìŠ¤ìº”ë˜ëŠ” ë””ë ‰í„°ë¦¬ ê°„ ë™ì‘ì„ ì¼ê´€ë˜ê²Œ ë§Œë“¤ê³ ì í–ˆìŠµë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

ëŒ€ë¶€ë¶„ ë³„ë„ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ í•„ìš” ì—†ì§€ë§Œ, ì´ì „ ë™ì‘ìœ¼ë¡œ ë˜ëŒë¦¬ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒ í›…ì„ ì¶”ê°€í•´ í•´ë‹¹ ë¯¸ë“¤ì›¨ì–´ë¥¼ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts
export default defineNuxtConfig({
  hooks: {
    'app:resolve'(app) {
      app.middleware = app.middleware.filter(mw => !/\/index\.[^/]+$/.test(mw.path))
    }
  }
})
```

### [í…œí”Œë¦¿ ì»´íŒŒì¼ ë³€ê²½](#template-compilation-changes)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

ì´ì „ì—ëŠ” Nuxtê°€ íŒŒì¼ ì‹œìŠ¤í…œì— ìˆëŠ” `.ejs` íŒŒì¼ í¬ë§·/ë¬¸ë²•ì˜ í…œí”Œë¦¿ì„ ì»´íŒŒì¼í•  ë•Œ `lodash/template`ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

ë˜í•œ, ì½”ë“œ ìƒì„±ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¼ë¶€ í…œí”Œë¦¿ ìœ í‹¸ë¦¬í‹°(`serialize`, `importName`, `importSources`)ë¥¼ ì œê³µí–ˆìœ¼ë‚˜, ì´ì œ ì œê±°ë©ë‹ˆë‹¤.

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

Nuxt v3ì—ì„œëŠ” `getContents()` í•¨ìˆ˜ê°€ ìˆëŠ” 'ê°€ìƒ' ë¬¸ë²•ìœ¼ë¡œ ì „í™˜í•˜ì—¬ í›¨ì”¬ ë” ìœ ì—°í•˜ê³  ì„±ëŠ¥ì´ ì¢‹ì•„ì¡ŒìŠµë‹ˆë‹¤.

ë˜í•œ, `lodash/template`ëŠ” ë³´ì•ˆ ì´ìŠˆê°€ ì—°ì´ì–´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. Nuxt í”„ë¡œì íŠ¸ì—ì„œëŠ” ë¹Œë“œ íƒ€ì„ì— ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œë§Œ ì‚¬ìš©ë˜ë¯€ë¡œ í° ë¬¸ì œëŠ” ì•„ë‹ˆì§€ë§Œ, ë³´ì•ˆ ê°ì‚¬ì— ê³„ì† ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ê²Œë‹¤ê°€ `lodash`ëŠ” ë¬´ê±°ìš´ ì˜ì¡´ì„±ì´ë©° ëŒ€ë¶€ë¶„ì˜ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ, Nuxtì—ì„œ ì§ì ‘ ì½”ë“œ ì§ë ¬í™” í•¨ìˆ˜ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì€ ì´ìƒì ì´ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  [unjs/knitwork](http://github.com/unjs/knitwork)ì™€ ê°™ì€ í”„ë¡œì íŠ¸ë¥¼ ìœ ì§€ ê´€ë¦¬í•˜ë©°, ë³´ì•ˆ ì´ìŠˆê°€ ë°œìƒí•˜ë©´ Nuxt ì—…ê·¸ë ˆì´ë“œ ì—†ì´ë„ ì§ì ‘ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

EJS ë¬¸ë²•ì„ ì‚¬ìš©í•˜ëŠ” ëª¨ë“ˆì€ PRì„ í†µí•´ ì—…ë°ì´íŠ¸í–ˆì§€ë§Œ, ì§ì ‘ í•´ì•¼ í•œë‹¤ë©´ ë‹¤ìŒ ì„¸ ê°€ì§€ ë°©ë²• ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* ë¬¸ìì—´ ì¹˜í™˜ ë¡œì§ì„ ì§ì ‘ `getContents()`ë¡œ ì´ë™
* https://github.com/nuxt-modules/color-mode/pull/240ì™€ ê°™ì´ ì»¤ìŠ¤í…€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì¹˜í™˜ ì²˜ë¦¬
* Nuxtê°€ ì•„ë‹Œ _ë³¸ì¸_ í”„ë¡œì íŠ¸ì˜ ì˜ì¡´ì„±ìœ¼ë¡œ `es-toolkit/compat`(lodash templateì˜ ëŒ€ì²´í’ˆ) ì‚¬ìš©:

```diff
+ import { readFileSync } from 'node:fs'
+ import { template } from 'es-toolkit/compat'
  // ...
  addTemplate({
    fileName: 'appinsights-vue.js'
    options: { /* some options */ },
-   src: resolver.resolve('./runtime/plugin.ejs'),
+   getContents({ options }) {
+     const contents = readFileSync(resolver.resolve('./runtime/plugin.ejs'), 'utf-8')
+     return template(contents)({ options })
+   },
  })
```

ë§ˆì§€ë§‰ìœ¼ë¡œ, í…œí”Œë¦¿ ìœ í‹¸ë¦¬í‹°(`serialize`, `importName`, `importSources`)ë¥¼ ì‚¬ìš© ì¤‘ì´ë¼ë©´, ë‹¤ìŒê³¼ ê°™ì´ `knitwork`ì˜ ìœ í‹¸ë¦¬í‹°ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts
import { genDynamicImport, genImport, genSafeVariableName } from 'knitwork'

const serialize = (data: any) => JSON.stringify(data, null, 2).replace(/"{(.+)}"(?=,?$)/gm, r => JSON.parse(r).replace(/^{(.*)}$/, '$1'))

const importSources = (sources: string | string[], { lazy = false } = {}) => {
  return toArray(sources).map((src) => {
    if (lazy) {
      return `const ${genSafeVariableName(src)} = ${genDynamicImport(src, { comment: `webpackChunkName: ${JSON.stringify(src)}` })}`
    }
    return genImport(src, genSafeVariableName(src))
  }).join('\n')
}

const importName = genSafeVariableName
```

::tip
`npx codemod@latest nuxt/4/template-compilation-changes`ë¥¼ ì‹¤í–‰í•˜ì—¬ ì´ ë‹¨ê³„ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
::

### [ì‹¤í—˜ì  ê¸°ëŠ¥ ì œê±°](#removal-of-experimental-features)

ğŸš¦ **ì˜í–¥ ìˆ˜ì¤€**: ìµœì†Œ

#### [ë¬´ì—‡ì´ ë³€ê²½ë˜ì—ˆë‚˜ìš”](#what-changed)

Nuxt 4ì—ì„œëŠ” ë„¤ ê°€ì§€ ì‹¤í—˜ì  ê¸°ëŠ¥ì´ ë” ì´ìƒ ì„¤ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤:

* `experimental.treeshakeClientOnly`ëŠ” `true`ì…ë‹ˆë‹¤(v3.0ë¶€í„° ê¸°ë³¸ê°’)
* `experimental.configSchema`ëŠ” `true`ì…ë‹ˆë‹¤(v3.3ë¶€í„° ê¸°ë³¸ê°’)
* `experimental.polyfillVueUseHead`ëŠ” `false`ì…ë‹ˆë‹¤(v3.4ë¶€í„° ê¸°ë³¸ê°’)
* `experimental.respectNoSSRHeader`ëŠ” `false`ì…ë‹ˆë‹¤(v3.4ë¶€í„° ê¸°ë³¸ê°’)
* `vite.devBundler`ëŠ” ë” ì´ìƒ ì„¤ì •í•  ìˆ˜ ì—†ìœ¼ë©°, ê¸°ë³¸ì ìœ¼ë¡œ `vite-node`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤

#### [ë³€ê²½ ì´ìœ ](#reasons-for-change)

ì´ ì˜µì…˜ë“¤ì€ ì˜¤ë«ë™ì•ˆ í˜„ì¬ ê°’ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì—ˆìœ¼ë©°, ê³„ì† ì„¤ì • ê°€ëŠ¥í•  í•„ìš”ê°€ ì—†ë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.

#### [ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„](#migration-steps)

* `polyfillVueUseHead`ëŠ” [ì´ í”ŒëŸ¬ê·¸ì¸](https://github.com/nuxt/nuxt/blob/f209158352b09d1986aa320e29ff36353b91c358/packages/nuxt/src/head/runtime/plugins/vueuse-head-polyfill.ts#L10-L11)ìœ¼ë¡œ ì‚¬ìš©ì ë ˆë²¨ì—ì„œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* `respectNoSSRHeader`ëŠ” [ì„œë²„ ë¯¸ë“¤ì›¨ì–´](https://github.com/nuxt/nuxt/blob/c660b39447f0d5b8790c0826092638d321cd6821/packages/nuxt/src/core/runtime/nitro/no-ssr.ts#L8-L9)ë¡œ ì‚¬ìš©ì ë ˆë²¨ì—ì„œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## [Nuxt 2 vs. Nuxt 3+](#nuxt-2-vs-nuxt-3)

ì•„ë˜ í‘œëŠ” Nuxtì˜ 3ê°€ì§€ ë²„ì „ì„ ê°„ë‹¨íˆ ë¹„êµí•œ ê²ƒì…ë‹ˆë‹¤:

ê¸°ëŠ¥ / ë²„ì „                | Nuxt 2          | Nuxt Bridge      | Nuxt 3+
-------------------------|-----------------|------------------|---------
Vue                      | 2               | 2                | 3
ì•ˆì •ì„±                    | ğŸ˜Š ì•ˆì •ì       | ğŸ˜Š ì•ˆì •ì          | ğŸ˜Š ì•ˆì •ì 
ì„±ëŠ¥                      | ğŸ ë¹ ë¦„        | âœˆï¸ ë” ë¹ ë¦„         | ğŸš€ ê°€ì¥ ë¹ ë¦„
Nitro ì—”ì§„                | âŒ             | âœ…                | âœ…
ESM ì§€ì›                  | ğŸŒ™ ë¶€ë¶„ì       | ğŸ‘ ë” ë‚˜ìŒ         | âœ…
TypeScript               | â˜‘ï¸ ì„ íƒì        | ğŸš§ ë¶€ë¶„ì          | âœ…
Composition API          | âŒ             | ğŸš§ ë¶€ë¶„ì          | âœ…
Options API              | âœ…             | âœ…                | âœ…
ì»´í¬ë„ŒíŠ¸ ìë™ import      | âœ…             | âœ…                | âœ…
`<script setup>` ë¬¸ë²•      | âŒ             | ğŸš§ ë¶€ë¶„ì          | âœ…
ìë™ import               | âŒ             | âœ…                | âœ…
webpack                  | 4              | 4                 | 5
Vite                     | âš ï¸ ë¶€ë¶„ì       | ğŸš§ ë¶€ë¶„ì          | âœ…
Nuxt CLI                 | âŒ êµ¬ë²„ì „      | âœ… nuxt           | âœ… nuxt
ì •ì  ì‚¬ì´íŠ¸               | âœ…             | âœ…                | âœ…

## [Nuxt 2ì—ì„œ Nuxt 3+ë¡œ](#nuxt-2-to-nuxt-3)

ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œëŠ” Nuxt 2ì˜ ê¸°ëŠ¥ê³¼ Nuxt 3+ì˜ ê¸°ëŠ¥ì„ ë‹¨ê³„ë³„ë¡œ ë¹„êµí•˜ê³ , í˜„ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì ì‘ì‹œí‚¤ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

::read-more{to="/docs/migration/overview"}
**Nuxt 2ì—ì„œ Nuxt 3ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ**ë¥¼ í™•ì¸í•˜ì„¸ìš”.
::

## [Nuxt 2ì—ì„œ Nuxt Bridgeë¡œ](#nuxt-2-to-nuxt-bridge)

Nuxt 2 ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì ì§„ì ìœ¼ë¡œ Nuxt 3ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ê³  ì‹¶ë‹¤ë©´ Nuxt Bridgeë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Nuxt BridgeëŠ” Nuxt 2ì—ì„œ Nuxt 3+ ê¸°ëŠ¥ì„ opt-in ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í˜¸í™˜ì„± ë ˆì´ì–´ì…ë‹ˆë‹¤.

::read-more{to="/docs/bridge/overview"}
**Nuxt 2ì—ì„œ Nuxt Bridgeë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜**
::
